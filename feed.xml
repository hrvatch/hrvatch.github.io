<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://criticalpath.dev/feed.xml" rel="self" type="application/atom+xml" /><link href="https://criticalpath.dev/" rel="alternate" type="text/html" /><updated>2026-02-14T16:15:41+01:00</updated><id>https://criticalpath.dev/feed.xml</id><title type="html">Critical Path</title><subtitle>A personal blog that contains stuff of interest to Hrvoje Butina. Deep dives into ASIC design &amp; verification. And some shallow dives into the embedded and low-level development.</subtitle><entry><title type="html">Building a custom RISC-V based SoC on FPGA - Part 1</title><link href="https://criticalpath.dev/picorv32_soc/development-of-a-picorv32-based-soc-part1/" rel="alternate" type="text/html" title="Building a custom RISC-V based SoC on FPGA - Part 1" /><published>2026-01-31T10:37:00+01:00</published><updated>2026-01-31T10:37:00+01:00</updated><id>https://criticalpath.dev/picorv32_soc/development-of-a-picorv32-based-soc-part1</id><content type="html" xml:base="https://criticalpath.dev/picorv32_soc/development-of-a-picorv32-based-soc-part1/"><![CDATA[<p>Recently I got an idea to create my own System-on-Chip (SoC). The main purpose of this SoC is to
validate a small IP in a real system: plugging it into the SoC, synthesizing it for an FPGA, writing
a driver for it, and validating it in a real environment. As my motivation for doing a write-up on
this project, maybe this design (and this post) will motivate someone to undertake a similar
project.</p>

<p>My initial goal was to build an SoC similar to what is presented in this paper: <a href="https://dl.acm.org/doi/pdf/10.1145/3787500">The simply-V 
Framework: an Extensible RISC-V Reconfigurable Soft-SoC for Open Research and Fast Prototyping</a>. I quickly found out a couple of things:</p>
<ol>
  <li>I’m not that familiar with RISC-V ISA.</li>
  <li>I’m not familiar with the RISC-V ecosystem. What do I mean by that? In the paper mentioned above
authors are using RISC-V Debug Module, PLIC, etc. I’m not familiar with those components, it 
will take me some time to become familiar with all of them.</li>
  <li>The main reason - I’m a bit rusty from not doing digital design for a couple of years now 
(my primary focus was ASIC verification) and I wanted to build as much of the design
myself to ‘lube’ my digital design skills.</li>
  <li>I don’t know enough about embedded Linux development.</li>
</ol>

<p>To summarize: the scope of the paper is too big for me at the moment.</p>

<p>My ultimate goal is to do the SoC capable of booting Linux but at the moment I’ll need a couple of
simpler stepping stones before I reach that goal.</p>

<p>The first of many such steps is the PicoRV32 based SoC.</p>

<h2 id="choice-of-hardware-and-eda-tools">Choice of hardware and EDA tools</h2>

<p>Through the years I’ve procured a couple of FPGA development boards - either at a low cost, or
through my work in the <a href="www.fer.hr">Faculty of Electrical Engineering and Computing</a>. I have the
following boards at my disposal:</p>
<ol>
  <li><a href="https://digilent.com/reference/programmable-logic/zedboard/start">Digilent Zedboard</a> - a
Zynq-7000 Development board. I bought this board while I was still a student, got it
with academic discount. Paid something like ~200€ at the time for it. I’ve used this one a lot. 
Couple of years ago I’ve built a software defined radio (SDR) based on Analog Devices AD9364 
(FMC expansion card) and ZedBoard as a carrier board.</li>
  <li><a href="https://www.96boards.org/product/ultra96/">Avnet ULTRA96-G REV 1</a> - it’s an older board which 
got an update over the years. I’ve got this one dirt cheap, I think something like 50$ and I’ve 
never used it which is a complete shame. I see now there are newer versions of this board, but 
the old one is still good.</li>
  <li><a href="https://digilent.com/reference/programmable-logic/nexys-video/start">Digilent Nexys Video</a> -
I’ve seen this board sitting in the University storage room, and since no-one was using it at
a time I was able to borrow it, under the promise I’d develop something on it, some stuff
that could be of use to the students. Well, now I have the chance to keep my promise!</li>
</ol>

<p>I’ve settled on using the Nexys Video dev board. It’s feature rich, has enough resources to
implement a decently large design, and most importantly I can use free Vivado license to synthesize
the design for this board. It’s a perfect board to implement design of the size (and speed) I’m
aiming at.</p>

<p>As for the software and simulators, initially I thought of using a complete free and open source
solutions. I was thinking of using <a href="https://altair.com/dsim">Altair DSim</a> since it’s free for
personal use, but I never got it to work with a free license. The simulator that is integrated
inside a Vivado also got a boost over the years. I tried playing with it, and I’m not a big fan. The
Vivado interface is clunky and I got glitches when running it on my machine - <a href="https://knowyourmeme.com/memes/btw-i-use-arch">BTW I use Arch
Linux</a>.</p>

<p>For now I think I’ll still use commercial EDA tools. Through the university I have access to Cadence
toolchain, namely to the Xcelium and JasperGold Formal tools. Since I’m not building anything
commercial (everything I build and post on this blog is either going to be published in some kind of
paper or it’s built for research purposes) I’ve decided to use the commercial tools for now; but
I’ll most definitely switch to free/open source solutions sometime in the future.</p>

<p>Eventually, I want to check out <a href="https://www.veripool.org/verilator/">Verilator</a> and the
<a href="https://symbiyosys.readthedocs.io/en/latest/">SymbiYosys</a> is of a particular interest to me.</p>

<h2 id="architecture">Architecture</h2>

<p>Before I start with the SoC I have to make a couple of architectural choices. The first and the most
important is the type of bus I’m going to use to connect everything. Since I have a fair amount of
experience with the AXI bus, I’ve decided to use it. The design I’m going to make is not a big
design and I don’t need some advanced AXI features, therefore I’ve settled on an AXI4-Lite bus.</p>

<p>There is one more reason why I chose AXI bus - the availability of the interconnect. Initially
I wanted to use Xilinx interconnect (since I’m developing for a Xilinx FPGA), but I decided to use
the least amount possible of Xilinx components. There is no particular strong reason why I did it. I
kinda dislike the block diagram approach and working in GUIs in general, if I use Xilinx IPs I’ll
most definitely be backed into this corner at some point. To be fair, the Vivado block diagram flow is
quick if you’re using Xilinx components, but if you’re not (and you’re not in the business of
building your own IP suitable for Vivado use), then it becomes a big inconvenience.</p>

<p>If I had to name one good reason, it would be to reuse this design on an FPGAs of other vendors
besides the Xilinx.</p>

<p>ETH Zürich provides a huge number of well designed and tapeout verified components and IPs through
the PULP platform. I’ve decided to use AXI4-Lite interconnect from the PULP platform <a href="https://github.com/pulp-platform/axi">Github
repository</a>. Repository also includes a
small testbench and an example on how to instantiate and use this interconnect.</p>

<div class="premonition info">
  <i class="premonition pn-info"></i>
  <div class="content">
    <p class="header">About PULP Platform</p><p>The PULP Platform is an open-source, energy-efficient computing architecture developed by 
ETH Zürich and the University of Bologna since 2013. I won’t list all the aims of the project,
you can check that out <a href="https://pulp-platform.org/projectinfo.htm">here</a>. To me, personally,
the most interesting thing is the open-source availability of the verified hardware components.
And the list of components - to say the least - is impressive. Check their <a href="https://github.com/pulp-platform">Github page</a>
for more details.
And I also need to mention this - one of the coolest things I’ve seen in the repository is the SoC
developed and taped out in an Open-Source EDA flow. I recommend readers to check this out: <a href="https://pulp-platform.org/docs/hotchips2025/hotchips_2025_basilisk_poster_revd.pdf">34 mm2 End-to-End Open-Source 64-bit Linux-Capable RISC-V SoC in 130nm BiCMOS</a>.</p>




  </div>
</div>

<p>The next choice I’ve had to make is which RISC-V core to use. I had a few requirements:</p>
<ul>
  <li>Simple to use and integrate</li>
  <li>Good documentation</li>
  <li>Support for RISC-V IMC instruction set. Why M and C? It’s quite possible that I’ll use
multiplication in the software that I develop. As for the C instruction set, I don’t want to use
DRAM or store my program on an SD Card. Everything should fit inside a small SRAM</li>
  <li>Must be either formally verified or verified in a constrained random manner against a Spike (or
some other) model</li>
  <li>I should be able to connect the core to the AXI4-Lite interconnect via some kind of bridge, or
ideally there should be a built in solution to do this</li>
  <li>The RISC-V core should be able to handle simple interrupts</li>
</ul>

<p>The <a href="https://github.com/YosysHQ/picorv32">PicoRV32</a> RISC-V core satisfies all of the above. It’s a neat 
small RISC-V core, with good documentation and it’s very simple to integrate. Actually it’s so good,
that if I was to use a simple RISC-V core in a project I was going to tapeout, this would be my
choice.</p>

<p>As far as the rest of the components, I need a timer capability, capability to use switches, LEDs and
buttons (some kind of simple GPIO), most definitely UART for communication and debugging and I also
need SRAM to store the bootloader and the program being ran.</p>

<p>I’ve decided to <a href="https://en.wikipedia.org/wiki/Reinventing_the_wheel">build all of those components
myself</a>.</p>

<p>The final architecture should look something like this:</p>

<figure class="post-figure">
  
    <a href="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/shock_soc.svg" class="glightbox">
      <img src="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/shock_soc.svg" alt="PicoRV32 based SoC block diagram" />
    </a>
  
  <figcaption>PicoRV32 based SoC block diagram</figcaption>
</figure>

<p>Ah and I forgot, I want everything to work on at least 100 MHz.</p>

<h2 id="development-of-axi4-lite-sram-module">Development of AXI4-Lite SRAM module</h2>

<p>This module is used to access static RAM via AXI4-Lite interface. This is where my programs and the
bootloader will be stored. I had a couple of requirements for this module:</p>
<ol>
  <li>Module should support back-to-back accesses on each clock cycle via AXI4-Lite interface.</li>
  <li>The block should be parametrizable with the SRAM bit width and the SRAM depth.</li>
  <li>The block should support byte access.</li>
</ol>

<p>I won’t go into much detail how I’ve designed this. Sufficient to say, there are enough resources on
designing your own AXI4-Slave. The most useful resource I’ve found on the internet was on the ZipCPU
blog: <a href="https://zipcpu.com/blog/2019/05/29/demoaxi.html">Building the perfect AXI4 slave</a>.
The most challenging thing I’ve had to deal with was throughput and the long backpressure path
from the slave’s <code class="language-plaintext highlighter-rouge">AxREADY/xREADY</code> signals. For example, the <code class="language-plaintext highlighter-rouge">ARREADY</code> goes from the
AXI4-Lite SRAM module to the interconnect, interconnect <code class="language-plaintext highlighter-rouge">ARREADY</code> goes to the PicoRV32. 
This long combinatorial path resulted in not being able to close the timing for the
design. I’ve dealt with these issues of throughput and long combinatorial path by using so called <em>Skid buffers</em>.
I’ve used the idea from this article <a href="https://zipcpu.com/blog/2019/05/22/skidbuffer.html">Building a Skid Buffer for AXI
processing</a>. 
Although the idea is fairly simple, I was actually surprised how much trouble
I’ve had implementing it. The good thing is I’ve had a formal testbench ready to verify correctness of
the AXI4-Lite protocol, and that made development of the AXI4-Lite interface <strong>a lot</strong> easier.</p>

<p>I encourage the reader to go through the ZipCPU blog post, the concept of <em>Skid buffers</em> (or
<em>register slices</em>) is very important in digital design.</p>

<p>I’ve synthesized this module in Vivado and found out one interesting thing. Vivado infers
Block RAM to be used for the SRAM. On my device (Artix 7 XC7A200T, Speed grade -1), BRAM should
theoretically work at max frequency of ~450 MHz. But when I checked the timing report after synthesis,
I found out the theoretical maximum frequency was roughly 200 MHz. The <a href="https://docs.amd.com/v/u/en-US/ug473_7Series_Memory_Resources">Xilinx UG473, Additional
Block RAM Features in 7 Series
Devices</a> states that if you want to
achieve max frequency, an additional register must be placed on the output, therefore I did that.
This increases latency by 1 extra clock cycle, on top of 1 clock cycle of latency BRAM already has,
but it increased the theoretical maximum frequency to roughly 350 MHz.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_reads.png">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_reads-600-867dcf8bb.webp 600w, /generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_reads-800-867dcf8bb.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_reads-600-b36a18583.png 600w, /generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_reads-800-b36a18583.png 800w" type="image/png" />
    <img loading="lazy" src="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_reads-800-b36a18583.png" alt="AXI4-Lite Consecutive reads from the AXI4-Lite slave. The slave supports maximum read throughput. A 3 clock cycles of latency can be seen from read request to read response." />
  </picture>
</a>

  
  <figcaption>AXI4-Lite Consecutive reads from the AXI4-Lite slave. The slave supports maximum read throughput. A 3 clock cycles of latency can be seen from read request to read response.</figcaption>
</figure>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_writes.png">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_writes-600-e0548a8d1.webp 600w, /generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_writes-800-e0548a8d1.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_writes-600-318584dff.png 600w, /generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_writes-800-318584dff.png 800w" type="image/png" />
    <img loading="lazy" src="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/consecutive_writes-800-318584dff.png" alt="Consecutive writes to the AXI4-Lite slave. Slave supports maximum write throughput." />
  </picture>
</a>

  
  <figcaption>Consecutive writes to the AXI4-Lite slave. Slave supports maximum write throughput.</figcaption>
</figure>

<p>The AXI4-Lite protocol was verified in JasperGold FPV. The data integrity was verified by using
formal scoreboarding techniques. Decent explanation of Formal Scoreboarding can be found here (note:
it requires registration): <a href="https://verificationacademy.com/topics/formal-verification/the-formal-101-series_learn-formal-the-easy-way/exhaustive-scoreboarding-and-data-integrity-verification-made-easy/">Formal 101: Exhaustive Scoreboarding and Data Integrity
Verification Made Easy</a>.
I would be interested to see if I could do the entire verification in SymbiYosys.</p>

<p>More details about the AXI4-SRAM module and the module sources are available in the following Github repository
<a href="https://github.com/hrvatch/axi4_lite_scratchpad">AXI4-Lite Scratchpad</a>.</p>

<h2 id="development-of-axi4-lite-countertimer">Development of AXI4-Lite Counter/Timer</h2>

<p>For the timers, I wanted something simple. I came up with the following design:</p>

<figure class="post-figure">
  
    <a href="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/counter.svg" class="glightbox">
      <img src="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/counter.svg" alt="IRQ will be triggered every ((1+PRESCALER VALUE)/Fclk)*(THRESHOLD VALUE) seconds; Fclk = clock
frequency in Hz" />
    </a>
  
  <figcaption>IRQ will be triggered every ((1+PRESCALER VALUE)/Fclk)*(THRESHOLD VALUE) seconds; Fclk = clock
frequency in Hz</figcaption>
</figure>

<p>Although this is a counter, technically it’s a timer, because it counts clock cycles. The counter
integrates 32-bit prescaler that first divides the input frequency. I could’ve used less than
32-bits, but since the bus is 32-bits wide, and since I have enough resources on my dev board, I’ve
settled on a 32-bit prescaler.</p>

<p>The counter supports setting compare (threshold) value. Each time a threshold value is reached,
a threshold sticky bit is set. The threshold bit is also connected to the interrupt line, therefore
when the counter reaches the threshold value an interrupt is asserted. Reading from the status register
clears this threshold sticky bit.</p>

<p>For the AXI4-Lite interface part, I’ve used what I’ve already written and debugged for SRAM, simply
cleaned it up a bit.</p>

<p>The design and a small driver are located in the <a href="https://github.com/hrvatch/axi4_lite_timer">AXI4-Lite Timer</a>
repository.</p>

<h2 id="development-of-axi4-lite-uart">Development of AXI4-Lite UART</h2>

<p>For the UART, I’ve initially wanted to build a 16550 compatible UART block. In the end I’ve decided
not to do that. There is only one major reason: I’ll be using only the UART TX/RX lines, don’t care
for the flow control. But I’ll be using some of the good features of the 16550 UART.</p>

<p>I decided on the following features:</p>
<ul>
  <li>Default should be 115200 baud, 8 data bits, 1 stop bit, no parity, should work out of the box.</li>
  <li>I want it to support baud rates up to (and including) 921600 bits per second.</li>
  <li>I want it to be on-the-fly configurable.</li>
  <li>It shouldn’t be a burden on the CPU, it needs to use TX/RX FIFOs and it needs to support
interrupts.</li>
  <li>I need FIFO full/empty signals in the status registers, but also I want to have configurable
threshold.</li>
</ul>

<p>First, the AXI4-Lite part. I’ve decided to reuse what I’ve had before i.e. AXI4-Lite interface with
debugged handshaking, and I’ve added a couple more registers. For the FIFOs, I settled on the 16-deep
FIFOs. In case a FIFO depth of 16 bytes proves to be too small, I can increase it in the future, but
for now I think the size is good enough.</p>

<p>The weakest point of the AXI4-Lite UART is the simplicity of the testbench. I’m only verifying
features in a direct test manner. In the ideal universe I would’ve done a fair bit of constrained
random/metric driven verification, and should’ve built a UVM testbench, but I was too excited to see
the design in action as soon as possible. Since this is not a commercial design but my own hobby
project, I’ve settled on a simple testbench and validation on an FPGA board.</p>

<p>The design and a small driver are located in the <a href="https://github.com/hrvatch/axi4_lite_uart">AXI4-Lite
UART</a>.</p>

<div class="premonition info">
  <i class="premonition pn-info"></i>
  <div class="content">
    <p class="header">Edit from the future</p><p>This design has been synthesized and tested on an FPGA development board. I’ve
tested communication between the board and my PC with all the supported baud rates, 7 and 8 data
bits, all parity values and all options of the stop bits and it works well.</p>

<p>If I get the chance to mentor students again in the future, the verification incompleteness of the
AXI4-Lite UART could be used as a strength. I could give this to a student working on his/her
bachelor thesis to learn the UVM and verify this design.</p>




  </div>
</div>

<h2 id="development-of-a-gpio">Development of a GPIO</h2>

<p>The goal for the future is to build a fully working GPIO, but for now I’ll settle only on handling
LEDs. The fully capable GPIO module will have to wait a bit. The reason why I build this ‘LED
handler’ is I wanted to have some kind of built-in debugging feature once I start validating my
design on the board.</p>

<p>In the end, I’ve settled on a single AXI4-Lite accessible register, which is connected to the LEDs.
Verified in Formal, worked well. This design can be found
<a href="https://github.com/hrvatch/axi_led">here</a>.</p>

<h2 id="common-clock-and-reset-ccr-module">Common clock and reset (CCR) module</h2>

<p>The purpose of the CCR module is to handle everything related to the clock and reset capability of
the SoC. The CCR module is a wrapper around the vendor PLL (in this case it’s Xilinx MMCM) and the
logic required to use the dedicated pushbutton on the development board as a reset button. A block
diagram of the CCR module is shown in the figure below.</p>

<figure class="post-figure">
  
    <a href="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/CCR.svg" class="glightbox">
      <img src="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/CCR.svg" alt="Block diagram of a Common Clock and Reset module." />
    </a>
  
  <figcaption>Block diagram of a Common Clock and Reset module.</figcaption>
</figure>

<p>I want the entire design to be under reset until the PLL locks, or if the user pushes a ‘Reset’
button. Since the design is small enough, the CCR module is good as-is. If it grows too large,
I have a strong suspicion I would run into clock/reset fanout issues. This is something to
keep in mind for the future.</p>

<p>If someone wants to reuse this entire design on a different vendor FPGA, I think only this module
needs to be updated.</p>

<h2 id="integration">Integration</h2>

<p>The next thing I need to decide on is the memory map. I’ve decided to use 16-bit wide addresses (no
need for 32-bits, and this reduces the size of address decoder), and decided on the following memory
map:</p>

<table>
  <thead>
    <tr>
      <th>Address Range</th>
      <th>Size</th>
      <th>Peripheral</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0x1000 - 0x1FFF</code></td>
      <td>4KB</td>
      <td>Timer/Counter</td>
      <td>Programmable timer with IRQ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0x2000 - 0x2FFF</code></td>
      <td>4KB</td>
      <td>GPIO (LEDs)</td>
      <td>LED control interface</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0x3000 - 0x3FFF</code></td>
      <td>4KB</td>
      <td>UART</td>
      <td>Serial communication</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0x4000 - 0x7FFF</code></td>
      <td>16KB</td>
      <td>SRAM</td>
      <td>Main program memory</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0x8000 - 0x8FFF</code></td>
      <td>4KB</td>
      <td>Bootloader ROM</td>
      <td>UART bootloader</td>
    </tr>
  </tbody>
</table>

<p>The PicoRV32 is issuing 32-bit addresses, but I’m truncating this in the PicoRV32 to AXI4-Lite
interconnect connection, by connecting only the 16 LSBs.</p>

<p>The component connection was fairly simple. I’ve used the following configuration for the AXI4-Lite
interconnect:</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">parameter</span> <span class="n">axi_pkg</span><span class="o">::</span><span class="n">xbar_cfg_t</span> <span class="n">AXI_XBAR_CFG_p</span> <span class="o">=</span> <span class="err">'</span><span class="o">{</span>
  <span class="nl">NoSlvPorts:</span>   <span class="n">AXI_MASTER_NBR_p</span><span class="p">,</span>
  <span class="nl">NoMstPorts:</span>   <span class="n">AXI_SLAVE_NBR_p</span><span class="p">,</span> 
  <span class="nl">MaxMstTrans:</span>  <span class="mi">2</span><span class="p">,</span>
  <span class="nl">MaxSlvTrans:</span>  <span class="mi">2</span><span class="p">,</span>
  <span class="nl">FallThrough:</span>  <span class="mb">1'b0</span><span class="p">,</span>
  <span class="nl">LatencyMode:</span>  <span class="n">axi_pkg</span><span class="o">::</span><span class="n">CUT_ALL_AX</span><span class="p">,</span>
  <span class="nl">AxiAddrWidth:</span> <span class="n">AXI_ADDR_BW_p</span><span class="p">,</span>
  <span class="nl">AxiDataWidth:</span> <span class="n">AXI_DATA_BW_p</span><span class="p">,</span>
  <span class="nl">NoAddrRules:</span>  <span class="n">AXI_SLAVE_NBR_p</span><span class="p">,</span>
  <span class="nl">default:</span> <span class="mb">'0</span>
<span class="o">}</span><span class="p">;</span>
</code></pre></div></div>
<p>I must admit I don’t fully understand the <code class="language-plaintext highlighter-rouge">MaxMstTrans</code> and <code class="language-plaintext highlighter-rouge">MaxSlvTrans</code> parameters. My assumption
is those control the number of outstanding transactions, i.e. the <code class="language-plaintext highlighter-rouge">MaxMstTrans</code> controls the number
of maximum outstanding transactions coming from the Master (PicoRV32), and <code class="language-plaintext highlighter-rouge">MaxSlvTrans</code> probably
controls the number of outstanding transactions a slave can handle.</p>

<p>Since the AXI4-Lite slaves I’ve built can accept two outstanding transactions, one currently handled
and one waiting because of the skid buffer, this is the number I chose i.e. <code class="language-plaintext highlighter-rouge">MaxSlvTrans = 2</code>. For
the master side I’ve chosen <code class="language-plaintext highlighter-rouge">MaxMstTrans = 2</code> also. But again, since PicoRV32 doesn’t pipeline
memory requests (it waits for the response before issuing the next) I think this shouldn’t matter at
all.</p>

<p>I’ve verified if the design works correctly for the values of <code class="language-plaintext highlighter-rouge">MaxMstTrans</code> and <code class="language-plaintext highlighter-rouge">MaxSlvTrans</code> I’ve
used and I didn’t see any issues at all.</p>

<p>For the <code class="language-plaintext highlighter-rouge">LatencyMode</code> I’ve chosen <code class="language-plaintext highlighter-rouge">axi_pkg::CUT_ALL_AX</code>. This is recommended latency mode in the
PULP documentation. Essentially, what this option does is it further breaks the combinatorial path of
the <code class="language-plaintext highlighter-rouge">AxREADY/xREADY</code> signals.</p>

<p>The address width is chosen to be the smallest possible, my intuition tells me this affects the width
of the address decoder and therefore potential maximum frequency as a consequence.</p>

<p>As for PicoRV32, the documentation on their Github is excellent. I’ve created a package with all the
relevant parameters used in the instantiation.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_COUNTERS_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_COUNTERS64_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>         
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_REGS_16_31_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_REGS_DUALPORT_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">TWO_STAGE_SHIFT_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">BARREL_SHIFTER_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">TWO_CYCLE_COMPARE_p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">TWO_CYCLE_ALU_p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">COMPRESSED_ISA_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">CATCH_MISALIGN_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">CATCH_ILLINSN_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_PCPI_p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_MUL_p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_FAST_MUL_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_DIV_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_IRQ_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_IRQ_QREGS_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_IRQ_TIMER_p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">ENABLE_TRACE_p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="n">REGS_INIT_ZERO_p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">MASKED_IRQ_p</span> <span class="o">=</span> <span class="mi">32</span><span class="err">'</span><span class="n">h</span> <span class="mi">0000_0000</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">LATCHED_IRQ_p</span> <span class="o">=</span> <span class="mi">32</span><span class="err">'</span><span class="n">h</span> <span class="n">ffff_fff3</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">PROGADDR_RESET_p</span> <span class="o">=</span> <span class="mi">32</span><span class="err">'</span><span class="n">h</span> <span class="mi">0000_8000</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">PROGADDR_IRQ_p</span> <span class="o">=</span> <span class="mi">32</span><span class="err">'</span><span class="n">h</span> <span class="mi">0000_4010</span><span class="p">;</span>
  <span class="k">parameter</span> <span class="kt">bit</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">STACKADDR_p</span> <span class="o">=</span> <span class="mi">32</span><span class="err">'</span><span class="n">h</span> <span class="n">ffff_ffff</span><span class="p">;</span>
</code></pre></div></div>

<p>The PicoRV32 was configured to start executing from the address 0x8000 (Bootloader). I’ve connected
Timer IRQ to the PicoRV32 IRQ[2] and UART to the PicoRV32 IRQ[3]. The reason why I didn’t use the
IRQ[0] and IRQ[1] for Timer and UART is the PicoRV32 documentation states the <code class="language-plaintext highlighter-rouge">ecall</code> and <code class="language-plaintext highlighter-rouge">ebreak</code>
instructions (exceptions) will trigger an interrupt on IRQ[0] and IRQ[1] respectively.
I’ve enabled internal counters, might come in handy if I ever have to do some performance profiling.
I’ve enabled barrel shifter, multiply and division. No need for trace.</p>

<p>I’ve used SRAM (Scratchpad) that I’ve developed for both the Bootloader ROM and for the SRAM. For
the Bootloader, I’ve left the AXI4-Write signals unconnected.</p>

<p>The PicoRV32 design files include PicoRV32-to-AXI4-Lite bridge and the PicoRV32 variant that
natively uses AXI4-Lite interface. I’m using the latter version, therefore I don’t need to
instantiate/build any bridges, it’s easy to integrate and it works out of the box.</p>

<h2 id="top-level-simulation">Top-level simulation</h2>

<p>On the top level I wanted to check if the components are connected correctly, and whether they work
after being integrated in a larger design. I want to do something simple, no major automated checks,
I want to be able to confirm components work correctly after integration by checking the waveforms.</p>

<p>I’ve decided to do some firmware-assisted verification i.e., I’ll build a simple bootloader and
a <code class="language-plaintext highlighter-rouge">hello_world</code> program that will use LEDs and UART, compile them, and load them in the simulation into
the Bootloader/SRAM. There are two reasons why I want to do it this way:</p>
<ol>
  <li>I can check the waveforms and the internals of the design in the simulation. Since I don’t have a
huge multi-million gate design, simulation will be very quick and I can easily debug both the
hardware and the software in the simulation.</li>
  <li>I’ll be able to reuse most of the firmware when I validate design on an FPGA development board.</li>
</ol>

<p>The compilation/build process should produce the following artefacts:</p>
<ul>
  <li>A compiled and linked binary stripped of all unnecessary debug symbols and sections. This file will
be used once the design is deployed on an FPGA board. The bootloader will load this binary via the
UART and execute the program.</li>
  <li>A .lst file that will contain the RISC-V assembly. I can use this file to verify that the
compilation is successful and that generated ASM is okay,</li>
  <li>A file containing hexadecimal representation of a stripped binary file. This file will be loaded
in the simulator.</li>
</ul>

<div class="premonition note">
  <i class="premonition pn-note"></i>
  <div class="content">
    <p class="header">VLSI tips</p><p>Ease of debugging and component/code reuse are some of the most important concepts in digital design and
digital verification</p>




  </div>
</div>

<h3 id="building-rv32imc-gnu-toolchain">Building RV32IMC GNU Toolchain</h3>

<p>To be able to do that I need a GNU toolchain that can be run on a Linux x86-64 host, and I’m
targeting (duh) PicoRV32 - in my case, that is RV32IMC. I’m certain there is a prebuilt GNU toolchain
somewhere in the outskirts of the Interwebz, I haven’t been able to find what I need, thus I decided
to build the GNU toolchain from the sources.</p>

<p>Since I’m using Arch, these are the steps that work for me:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install dependencies</span>
<span class="nb">sudo </span>pacman <span class="nt">-S</span> base-devel git python cmake ninja gawk <span class="se">\</span>
    libmpc mpfr gmp zlib expat glib2

<span class="c"># Clone the repository</span>
git clone https://github.com/riscv/riscv-gnu-toolchain.git
<span class="nb">cd </span>riscv-gnu-toolchain

<span class="c"># Configure for bare-metal RV32IMC</span>
<span class="c"># --prefix: installation directory</span>
<span class="c"># --with-arch: target architecture</span>
<span class="c"># --with-abi: application binary interface (ilp32 = int/long/pointer are 32-bit)</span>
./configure <span class="nt">--prefix</span><span class="o">=</span><span class="nv">$HOME</span>/riscv <span class="se">\</span>
            <span class="nt">--with-arch</span><span class="o">=</span>rv32imc <span class="se">\</span>
            <span class="nt">--with-abi</span><span class="o">=</span>ilp32

<span class="c"># Build the bare-metal toolchain (newlib-based)</span>
<span class="c"># This builds: gcc, binutils, newlib, gdb</span>
<span class="c"># Takes roughly one hour </span>
<span class="nb">sudo </span>make <span class="nt">-j</span><span class="si">$(</span><span class="nb">nproc</span><span class="si">)</span>

<span class="c"># Add the installation directory to the PATH environment variable</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/riscv/bin:<span class="nv">$PATH</span>

<span class="c"># Check version</span>
riscv32-unknown-elf-gcc <span class="nt">--version</span>

<span class="c"># Test compile</span>
<span class="nb">cat</span> <span class="o">&gt;</span> test.c <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'
int main(void) {
    volatile int x = 42;
    return x;
}
</span><span class="no">EOF

</span>riscv32-unknown-elf-gcc <span class="nt">-march</span><span class="o">=</span>rv32imc <span class="nt">-mabi</span><span class="o">=</span>ilp32 <span class="nt">-nostdlib</span> <span class="nt">-o</span> test.elf test.c
file test.elf
<span class="c"># Should show: ELF 32-bit LSB executable, UCB RISC-V</span>
</code></pre></div></div>

<p>Typical bare-metal compile flags that I use when building the code:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CFLAGS <span class="o">=</span> <span class="nt">-march</span><span class="o">=</span>rv32imc <span class="se">\</span>
         <span class="nt">-mabi</span><span class="o">=</span>ilp32 <span class="se">\</span>
         <span class="nt">-nostdlib</span> <span class="se">\</span>
         <span class="nt">-nostartfiles</span> <span class="se">\</span>
         <span class="nt">-ffreestanding</span> <span class="se">\</span>
         <span class="nt">-O2</span> <span class="se">\</span>
         <span class="nt">-Wall</span>
</code></pre></div></div>

<p>If required, the detailed instructions can be found <a href="https://github.com/riscv-collab/riscv-gnu-toolchain">here</a>.</p>

<div class="premonition note">
  <i class="premonition pn-note"></i>
  <div class="content">
    <p class="header">On the GNU Toolchain build steps</p><p>I’m aware the instructions on how to build GNU Toolchain for the RV32IMC target are available
online, or in the 21st century you can ask LLM for the steps. The problem with the LLM/Stack
Overflow/Something else instructions is I’ve not been able to successfully reproduce them without
issues every time. The main reason why I’ve written down these instructions is so I don’t have to
repeat the entire research/debugging process again, I just want to be able to execute and
easily get the known results. To summarize, I’m mostly doing this for my own sake :-)</p>




  </div>
</div>

<h3 id="generating-compilation-artefacts">Generating compilation artefacts</h3>

<p>As mentioned previously, we want to produce three targets as a result of compilation.</p>
<ol>
  <li>A compiled and linked binary stripped of all unnecessary debug symbols and sections</li>
  <li>A .lst file that will contain the RISC-V assembly.</li>
  <li>A file containing hexadecimal representation of a stripped binary file.</li>
</ol>

<p>To create a binary file with sections and relocation information discarded, an <code class="language-plaintext highlighter-rouge">objcopy</code> GNU utility
can be used:</p>

<p><code class="language-plaintext highlighter-rouge">objcopy -O binary firmware.elf firmware.bin</code></p>

<p>To view executable in an assembly form, an <code class="language-plaintext highlighter-rouge">objdump</code> utility can be used:</p>

<p><code class="language-plaintext highlighter-rouge">objdump -d -S firmware.elf &gt; firmware.lst</code></p>

<p>The last thing remaining is to generate a hexadecimal representation of the binary file created with
the <code class="language-plaintext highlighter-rouge">objcopy</code> command. For this purpose I’ve written a small Python script:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span><span class="kn">import</span> <span class="n">sys</span>

<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="sh">"</span><span class="s">rb</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">bindata</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>

<span class="c1"># Pad to 4-byte boundary
</span><span class="k">while</span> <span class="nf">len</span><span class="p">(</span><span class="n">bindata</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">bindata</span> <span class="o">+=</span> <span class="sa">b</span><span class="sh">'</span><span class="se">\x00</span><span class="sh">'</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">bindata</span><span class="p">),</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">bindata</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%02x%02x%02x%02x</span><span class="sh">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

</code></pre></div></div>

<p>This script writes 32 bits of data in hexadecimal format into each line of the file. The output is in
the little-endian format. If a binary file is not 4-byte aligned, it’s first padded with zeros to a
4-byte boundary.</p>

<h3 id="bootloader-startups-and-hello_world-program-for-the-top-level-simulation">Bootloader, startup.S and <code class="language-plaintext highlighter-rouge">hello_world</code> program for the top-level simulation</h3>

<p>The bootloader for the simulation is very simple. It contains only one instruction - jump to the first address in the
SRAM.</p>

<p>As for the startup files and the <code class="language-plaintext highlighter-rouge">hello_world</code> program itself, I won’t go into much detail. Code is
worth more than a million words, and the code is available in the <a href="https://github.com/hrvatch/rv32-shock/sw">rv32-shock Github repository</a>.</p>

<div class="premonition info">
  <i class="premonition pn-info"></i>
  <div class="content">
    <p class="header">Project name</p><p>I figured I have to give this project a name and I’ve settled on calling it rv32-shock. 
The etymology of the name is from Croatian word “Šok” (a play on the acronym SoC), which directly
translates into ‘shock’ in English. Since it’s RV32 based SoC, I figured ‘rv32-shock’ is a good
enough name.</p>




  </div>
</div>

<p><code class="language-plaintext highlighter-rouge">startup.S</code> is a program written in RISC-V assembly. This file is usually known as <code class="language-plaintext highlighter-rouge">crt0.S</code> in the
embedded world. I didn’t write this file from scratch, but instead I reused the file from <a href="https://github.com/YosysHQ/picorv32/tree/main/firmware">PicoRV32
firmware</a> and modified it for my own
purpose.</p>

<p>The file contains initialization of the registers, initialization of the stack pointer, interrupt
handling routine and subfunctions that can be used to enable/disable interrupts. The interrupt
handling routine performs the following:</p>
<ol>
  <li>Saves the context,</li>
  <li>Executes the interrupt function,</li>
  <li>Restores the context,</li>
  <li>Continues main program execution.</li>
</ol>

<p>The <code class="language-plaintext highlighter-rouge">main.c</code> does the following:</p>
<ul>
  <li>Initializes UART</li>
  <li>Programs the timer to interrupt every 1 second</li>
  <li>Enables interrupt for the timer</li>
</ul>

<p>Every time interrupt is triggered, a CPU will start running an interrupt routine. The interrupt
program will check if the cause of interrupt was indeed a timer. If it was, it will turn off
the currently lit LED, and it will turn on the LED next to it. After 50 seconds, CPU will execute
an <code class="language-plaintext highlighter-rouge">ebreak</code> instruction thus asserting a <code class="language-plaintext highlighter-rouge">trap</code> signal of the PicoRV32 CPU.</p>

<div class="premonition note">
  <i class="premonition pn-note"></i>
  <div class="content">
    <p class="header">Handling simulation time</p><p>Waiting for 1 second in the simulation can take an eternity. On a complex, multi-million gate SoC,
an actual second could take a couple of days of simulation time. Although this is not the case for
this design, it’s still prudent to reduce the simulation time to be as low as possible. In the
simulation, timer is not programmed to count every 1 second, but instead to ~500 clock
cycles. This is good enough to validate the design and it reduces simulation time.</p>




  </div>
</div>

<p>The <code class="language-plaintext highlighter-rouge">startup.S</code> and <code class="language-plaintext highlighter-rouge">main.c</code> form the basis for the <code class="language-plaintext highlighter-rouge">hello_world</code>.</p>

<p>Drivers for handling timer/counter and UART are copied from their own respective repositories.</p>

<p>The final thing needed is the linker script. At first I tried writing linker script myself. The
problem with this approach is I write linker script once-a-year, and every time I have to remember
how this is done all over again. There are numerous tutorials and documents online on how to do it.
For example, previously I would refresh my memory by watching <a href="https://www.youtube.com/watch?v=qWqlkCLmZoE">this YouTube series from the Fastbit
Embedded Brain Academy</a>. Since I needed a simple linker
script and I wanted something done fast, this time I’ve asked the LLM for help. I’m amazed I got the
linker script that worked fully on the first go, without the need for any additional debugging.</p>

<p>To make my life easier, I’ve created a Makefile that automates artefact generation. This Makefile
can be found in the <code class="language-plaintext highlighter-rouge">sw/hello_world</code> subdirectory in the <a href="https://github.com/hrvatch/rv32-shock/">rv32-shock Github repository</a>.</p>

<h3 id="loading-program-into-the-ram-in-the-simulation">Loading program into the RAM in the simulation</h3>

<p>After building the <code class="language-plaintext highlighter-rouge">hello_world</code> program a .hex file is produced. This file is used to initialize
RAM in the simulation. My simulation Makefile has the possibility to take bootloader and SRAM
initialization files as parameters. If a file is provided, there is an argument in the Makefile that
is passed to the simulator, to create a <code class="language-plaintext highlighter-rouge">define</code>.</p>

<p>There are multiple ways to achieve this depending on the language used and preferences; I’ve settled
on using the <code class="language-plaintext highlighter-rouge">$readmemh</code> Verilog system task. The following code is a direct copy-paste from the top
level testbench.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">`ifdef</span> <span class="n">BOOTLOADER_INIT_FILE</span>
<span class="k">initial</span> <span class="k">begin</span>
  <span class="kt">static</span> <span class="kt">int</span> <span class="n">fd</span> <span class="o">=</span> <span class="p">$</span><span class="nb">fopen</span><span class="p">(</span><span class="cp">`BOOTLOADER_INIT_FILE</span><span class="p">,</span> <span class="s">"r"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fd</span><span class="p">)</span> <span class="k">begin</span>
    <span class="p">$</span><span class="nb">display</span><span class="p">(</span><span class="s">"Memory file %0s not found!"</span><span class="p">,</span> <span class="cp">`BOOTLOADER_INIT_FILE</span><span class="p">);</span>
    <span class="p">$</span><span class="n">fatal</span><span class="p">;</span>
  <span class="k">end</span>
  <span class="p">$</span><span class="nb">fclose</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
  <span class="p">$</span><span class="nb">readmemh</span><span class="p">(</span><span class="cp">`BOOTLOADER_INIT_FILE</span><span class="p">,</span> 
    <span class="n">picorv32_soc_dut</span><span class="p">.</span><span class="n">axi_lite_bootloader_inst</span><span class="p">.</span><span class="n">ram_block</span><span class="p">);</span>
<span class="k">end</span>
<span class="cp">`endif</span>

<span class="cp">`ifdef</span> <span class="n">RAM_INIT_FILE</span>
<span class="k">initial</span> <span class="k">begin</span>
  <span class="kt">static</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>
  <span class="n">fd</span> <span class="o">=</span> <span class="p">$</span><span class="nb">fopen</span><span class="p">(</span><span class="cp">`RAM_INIT_FILE</span><span class="p">,</span> <span class="s">"r"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fd</span><span class="p">)</span> <span class="k">begin</span>
    <span class="p">$</span><span class="nb">display</span><span class="p">(</span><span class="s">"Memory file %0s not found!"</span><span class="p">,</span> <span class="cp">`RAM_INIT_FILE</span><span class="p">);</span>
    <span class="p">$</span><span class="n">fatal</span><span class="p">;</span>
  <span class="k">end</span>
  <span class="p">$</span><span class="nb">fclose</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
  <span class="p">$</span><span class="nb">readmemh</span><span class="p">(</span><span class="cp">`RAM_INIT_FILE</span><span class="p">,</span> 
    <span class="n">picorv32_soc_dut</span><span class="p">.</span><span class="n">axi_lite_scratchpad_inst</span><span class="p">.</span><span class="n">ram_block</span><span class="p">);</span>
<span class="k">end</span>
<span class="cp">`endif</span> <span class="c1">// RAM_INIT_FILE</span>

</code></pre></div></div>

<h3 id="top-level-testbench">Top level testbench</h3>

<p>The top level testbench contains the DUT instantiation, blocks used for generating clock and reset,
block of code that prints bytes received from UART and another block of code used to print the LED
status. After running simulation I’m getting the following output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LED status: 00000000
LED status: 00000001
@             86232000: RX = 0x55 ('U')
LED status: 00000010
@             97152000: RX = 0x41 ('A')
LED status: 00000100
@            108052000: RX = 0x52 ('R')
LED status: 00001000
@            118952000: RX = 0x54 ('T')

...

LED status: 00010000
LED status: 00000100
LED status: 00001000
LED status: 00010000
LED status: 00100000
LED status: 01000000
LED status: 10000000
</code></pre></div></div>

<p>And the waveforms display the following…</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/waveforms.png">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/waveforms-600-eb11af191.webp 600w, /generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/waveforms-796-eb11af191.webp 796w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/waveforms-600-4eeb70d9f.png 600w, /generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/waveforms-796-4eeb70d9f.png 796w" type="image/png" />
    <img loading="lazy" src="/generated/assets/images/2026-01-31-development-of-a-picorv32-based-soc_part1/waveforms-796-4eeb70d9f.png" alt="rv32-shock waveforms showing UART and LED activity" />
  </picture>
</a>

  
  <figcaption>rv32-shock waveforms showing UART and LED activity</figcaption>
</figure>

<p>I will consider this a “good enough” design and proceed with backend work: writing constraints,
synthesis, timing closure, place and route, bitstream generation, aaaand I still have to write a
bootloader!</p>

<p>All of that (and more) will be written up in the next Part 2 of the project.</p>

<h2 id="summary">Summary</h2>

<p>In this first part of this series I’ve covered the architectural choices, design and verification of
the individual components, and integration of the PicoRV32 based SoC. The SoC includes a PicoRV32
RISC-V core connected via the PULP AXI4-Lite interconnect to an SRAM, a timer/counter, a UART, a
simple LED controller, and a bootloader ROM. All components were designed with back-to-back
throughput in mind, using skid buffers to break long combinatorial paths. The AXI4-Lite protocol and
data integrity were verified formally in JasperGold, and the integrated design was validated in
simulation using firmware-assisted verification.</p>

<p>In Part 2 I’ll cover the backend work: writing Vivado constraints and TCL scripts, synthesis, timing
analysis and closure, place and route, and bitstream generation. I’ll also go through the
development of the UART bootloader, reuse of the hello_world program, and validation on the Nexys
Video FPGA board — including resource utilization numbers, achieved maximum frequency, and a video
showing the whole thing in action.</p>]]></content><author><name></name></author><category term="picorv32_soc" /><category term="PicoRV32" /><category term="System-on-Chip" /><category term="FPGA" /><category term="RISC-V" /><summary type="html"><![CDATA[I built a custom RISC-V based SoC on FPGA as a base for the purpose of validating new IP designs in a real system. This is part one of two, covering architectural choices, digital design, and verification.]]></summary></entry><entry><title type="html">Using Notion to set things in motion</title><link href="https://criticalpath.dev/productivity/using-notion-to-set-things-in-motion/" rel="alternate" type="text/html" title="Using Notion to set things in motion" /><published>2025-12-06T18:17:00+01:00</published><updated>2025-12-06T18:17:00+01:00</updated><id>https://criticalpath.dev/productivity/using-notion-to-set-things-in-motion</id><content type="html" xml:base="https://criticalpath.dev/productivity/using-notion-to-set-things-in-motion/"><![CDATA[<p>Ultimately, I decided I want to manage my hobby projects in a Scrum style.</p>

<p>I can see people screaming: “Are you insane? What drugs are you on? Why do you want to turn your 
fun activity into something that feels like some annoying and life-draining corporate project?” 
First of all, I don’t think the Scrum itself is stupid and life draining, it’s the 1000 other 
things like managers emphasizing and prioritizing writing Jira tickets and doing time estimates 
while you’re trying to deliver that bug fix on the Friday afternoon. This is not it. Here, you’re 
your own manager, and Scrum is just a way of keeping track of things. Besides there are 
numerous benefits, but the most important ones to me:</p>
<ol>
  <li>I want to keep track of my projects,</li>
  <li>I want to keep myself accountable, and actually finish my projects.</li>
</ol>

<p>There are some additional benefits that are not obvious at first. Thinking about how to decompose your project into achievable tasks forces you to ACTUALLY think hard about what you’re trying to do, it forces you to do a deep analysis. Once you break it down, you’ll have clear steps on how you’re going to achieve something, and you’ll also have some insight when and how you’re going to complete your project.</p>

<p>Of course, I don’t think this is feasible for every little thing I do. I quickly found out it’s better to start immediately working on my idea, create something concrete, gather more information and to get a feeling is this something I’d really like to do or this was some passing whim. After I’m sure I find it fun (or useful), I’ll do some “project planning”.</p>

<div class="premonition info">
  <i class="premonition pn-info"></i>
  <div class="content">
    <p class="header">Setting SMART goals</p><p>Couple of months ago my girlfriend (who is very smart) taught me about setting SMART goals. 
I keep forgetting what the acronym stands for, but I vividly remember when she first told me about it, 
it resonated with me. Well, instead of asking her for the 100th time what each letter means, 
I’ll now write it down:</p>

<ul>
  <li><strong>S - Specific</strong>: Clearly define <em>what</em> you want to achieve, including details like who, what, where and why. (e.g., “I’ll build a RISC-V core”, becomes “I’ll build a basic, single cycle, 32-bit RISC-V core supporting IMAC instruction set to improve my digital design skills, and to become familiar with the RISC-V ecosystem”.</li>
  <li><strong>M - Measurable</strong>: Include criteria to track progress and know when you’ve succeeded, using numbers, percentages, or other data points.</li>
  <li><strong>A - Achievable</strong>: Ensure the goal is challenging but realistic, with resources and capabilities to reach it.</li>
  <li><strong>R - Relevant</strong>: Confirm the goal matters to your broader objectives and is worthwhile.</li>
  <li><strong>T - Time-bound</strong>: Set a specific deadline or time frame for completion, creating urgency and focus.</li>
</ul>




  </div>
</div>

<h2 id="task-breakdown">Task breakdown</h2>

<p>The next thing I decided on is the Project and Task breakdown. I decided on the following:</p>
<ul>
  <li>I want to have the following hierarchy: Projects-&gt;Epics-&gt;Stories-&gt;Tasks.</li>
  <li>Each project can have multiple Epics. Each Epic describes a significant feature that I need to develop or some area that I need to study that would take multiple months.</li>
  <li>Epics are further decomposed into Stories. Each Story contains a meaningful unit of work that can be done in a month or so.</li>
  <li>Stories are decomposed into tasks. Each task would represent a concrete action needed to complete a Story.</li>
</ul>

<p>Here is one hypothetical project example that for the hierarchy I’ve described above. Let’s say I want to design a 
<a href="https://en.wikipedia.org/wiki/Floating-point_unit">floating-point unit</a>. This would be my Project. Now, there are multiple ways how I would decompose this Project into Epics, but let’s say my approach is the following:</p>
<ol>
  <li>Floating point unit documentation,</li>
  <li>Floating point unit design,</li>
  <li>Floating point unit validation on a Field Programmable Gate Array (FPGA).</li>
  <li>etc.</li>
</ol>

<p>The 2nd Epic - Floating point unit design - I would further decompose into the following Stories:</p>
<ol>
  <li>Multiplication (F.MUL),</li>
  <li>Leading Zero Counter (LZC),</li>
  <li>Division (F.DIV),</li>
  <li>Square root (F.SQRT),</li>
  <li>etc.</li>
</ol>

<p>The F.MUL story can be decomposed into the following tasks:</p>
<ol>
  <li>Implement mantissa multiplication,</li>
  <li>Implement normalization,</li>
  <li>Implement exponent calculation,</li>
  <li>Implement rounding,</li>
  <li>Create a Formal verification environment,</li>
  <li>Get a Formal proof of the F.MUL datapath,</li>
  <li>etc.</li>
</ol>

<p>And here is a visualization of the above:</p>
<pre><code class="language-mermaid">flowchart LR

A(Floating point unit)
A --&gt; E1(Epic: FPU documentation)
A --&gt; E2(Epic: FPU design)
A --&gt; E3(Epic: FPU implementation on an FPGA)

subgraph FPU documentation
E1 --&gt; E1S1(...)
end

subgraph FPU implementation on an FPGA
E3 --&gt; E3S1(...)
end

subgraph "FPU Design"
E2 --&gt; E2S1(Story: Multiplication F.MUL)
E2 --&gt; E2S2(Story: Leading Zero Counter LZC)
E2 --&gt; E2S3(Story: Division F.DIV)
E2 --&gt; E2S4(Story: Square root F.SQRT)
E2S2 --&gt; E2S2T1(...)
E2S3 --&gt; E2S3T1(...)
E2S4 --&gt; E2S4T1(...)
subgraph F.MUL
E2S1 --&gt; E2S1T1(Task: Implement mantissa multiplication)
E2S1 --&gt; E2S1T2(Task: Implement normalization)
E2S1 --&gt; E2S1T3(Task: Implement exponent calculation)
E2S1 --&gt; E2S1T4(Task: Implement rounding)
E2S1 --&gt; E2S1T5(Task: Create Formal verification environment)
E2S1 --&gt; E2S1T6(Task: Get a Formal proof of the F.MUL datapath)
end
end
</code></pre>

<h2 id="choosing-tool-for-project-and-task-planning">Choosing tool for project and task planning</h2>

<p>When it came time to pick tool for project management I wanted a tool that supported the following
criteria:</p>
<ul>
  <li>It must be free to use,</li>
  <li>It must be a web based tool because I’m working on multiple machines and multiple operating systems,</li>
  <li>It should have an establishaed reputation, i.e., there should be an existing user base, I don’t
want the tool to be cancelled or disappear overnight,</li>
  <li>It should support building a hierarchy of Projects-&gt;Epics-&gt;Stories-&gt;Tasks as I’ve outlined previously,</li>
  <li>It should allow me to keep track of time for each Task,</li>
  <li>It should be possible to have a board (Kanban style) where I could see the task breakdown for 
the current month (Sprint),</li>
  <li>Once I set it it up, it should be easy to use - I should be able to plan tasks for the current month with
a couple of clicks, adding Tasks, Stories, Epics and Projects should be simple.</li>
</ul>

<p>There are bajillion tools that fit these criteria; I’ve spent a couple of days trying some of those. There
are two tools that I really liked: <a href="https://www.jetbrains.com/youtrack/teams/management.html">JetBrains YouTrack</a>
and <a href="https://www.notion.so/">Notion</a>. In the end I chose Notion, not because one tool is better
than the other, it was simply a coin toss choice, and Notion won.</p>

<div class="premonition info">
  <i class="premonition pn-info"></i>
  <div class="content">
    <p class="header">Retrospective: Using Notion</p><p>In retrospective, Notion was actually not that easy to set-up. It took me roughly 3 days to set up 
everything. In these 3 days I’ve included research, watching tutorials and all the trial and error 
before I got what I actually wanted. It might be a  skill issue, but I think the main reason for 
the non-ease-of-use is it has a very rich featurset. It takes some time to 
get familiar with the required features, tool flow and the intended way or work.</p>

<p>I’ll mention two resources that actually got me started:</p>
<ol>
  <li>Anthropic’s Claude AI - It helped a lot when I started using Notion. Btw I’m not
endorsing Claude above any other currently available LLMs, I used it because I had the full
subscription at the time.</li>
  <li><a href="https://www.youtube.com/watch?v=kOf3QSBV29Y">The Notion Tutorial - Full Course for Beginners</a> on YouTube.
This video helped ALOT. It’s long (roughly 2 hours) but it’s worth watching if you’re serious
about using Notion. The video author also has lots of other videos on topics surrounding Notion
and productivity in general. Fully recommend.</li>
</ol>




  </div>
</div>

<h3 id="using-notion-to-set-things-in-motion">Using Notion to set things in motion</h3>

<p>First I’ll start with the results, and then I’ll provide a step-by-step solution on how to implement
this yourself in Notion.</p>

<p>The solution I’ve built focuses around four main databases: one database containing Projects,
one database containing Epics, one database containing all Stories and one database containing all 
Tasks. Each project gets its own separate page.</p>

<p>The Projects database lists all the projects with their status, description, start and end date.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/projects.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/projects-600-11f76890a.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/projects-800-11f76890a.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/projects-600-11f76890a.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/projects-800-11f76890a.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/projects-800-11f76890a.webp" alt="Notion database containing a list of Projects with the accompanying properties" />
  </picture>
</a>

  
  <figcaption>Notion database containing a list of Projects with the accompanying properties</figcaption>
</figure>

<p>The Epics database contains all Epics for all Projects. Each Epic is assigned to on or more Projects. 
Each Epic contains a list of Stories required to finish that particular Epic. The Estimated Hours, 
Actual Hours, Remaining Hours, and Progress are automatically calculated. Estimated and Actual Hours 
are sum of the same-named properties of all Stories contained inside an Epic.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/epics.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/epics-600-c07aa2b9a.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/epics-800-c07aa2b9a.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/epics-600-c07aa2b9a.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/epics-800-c07aa2b9a.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/epics-800-c07aa2b9a.webp" alt="Database containing list of all Epics. Estimated hours and Actual hours are automatically calculated by summing those properties for all the Stories contained in an Epic" />
  </picture>
</a>

  
  <figcaption>Database containing list of all Epics. Estimated hours and Actual hours are automatically calculated by summing those properties for all the Stories contained in an Epic</figcaption>
</figure>

<p>The Stories database contains all Stories for all Projects. Each Story is assigned to one (or more)
Epics. Estimated Hours, Actual Hours, Remaining Hours and Progress are automatically calculated.
Like in the Epics database, the Estimated Hours and the Actual Hours are are calculated by summing
the values of the same-names properties for all Tasks contained within a Story.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/stories.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/stories-600-a96a66889.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/stories-800-a96a66889.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/stories-600-a96a66889.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/stories-800-a96a66889.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/stories-800-a96a66889.webp" alt="Database containing list of all Stories. Estimated hours and Actual hours are automatically calculated by summing the same-named properties for all the Tasks contained inside a Story" />
  </picture>
</a>

  
  <figcaption>Database containing list of all Stories. Estimated hours and Actual hours are automatically calculated by summing the same-named properties for all the Tasks contained inside a Story</figcaption>
</figure>

<p>The Tasks database contains as list of Tasks for <strong>all</strong> Projects. Each Task is described with the
following properties:</p>
<ul>
  <li>Name of the task,</li>
  <li>Task description,</li>
  <li>Status (In progress, Ongoing, Done),</li>
  <li>Estimated hours - time it takes to finish a task,</li>
  <li>Actual Hours - time it took to finish a task,</li>
  <li>Over-Under - automatically calculated property, describing if the task was over or under estimated,</li>
  <li>Variance - time difference between the Estimated and Actual Hours. Also auto calculated.</li>
</ul>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_backlog.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_backlog-600-6c320c53c.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_backlog-800-6c320c53c.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_backlog-600-6c320c53c.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_backlog-800-6c320c53c.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_backlog-800-6c320c53c.webp" alt="Tasks database on the Backlog view. The Backlog view is used to see all the tasks that are not being worked on this month." />
  </picture>
</a>

  
  <figcaption>Tasks database on the Backlog view. The Backlog view is used to see all the tasks that are not being worked on this month.</figcaption>
</figure>

<p>Tasks that are going to be worked on in the current month are displayed on a board. The <a href="https://en.wikipedia.org/wiki/Kanban_board">Kanban board</a>
style is, in my opinion, a great tool to visually depict work at various stages of a process.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_kanban.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_kanban-600-492a713f0.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_kanban-800-492a713f0.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_kanban-600-492a713f0.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_kanban-800-492a713f0.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/tasks_kanban-800-492a713f0.webp" alt="The Kanban board show which tasks are planned to be worked on this month, but are still not in progress, tasks I'm currently working on, and tasks I've finished this month." />
  </picture>
</a>

  
  <figcaption>The Kanban board show which tasks are planned to be worked on this month, but are still not in progress, tasks I'm currently working on, and tasks I've finished this month.</figcaption>
</figure>

<p>As I’ve mentioned before, each project gets a dedicated Project dashboard page. This page essentially
contains a link to the Epics, Stories and Tasks databases, but it’s set up in such a way to provide
a clear overview of the Project.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_1.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_1-600-3614c359e.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_1-800-3614c359e.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_1-600-3614c359e.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_1-800-3614c359e.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_1-800-3614c359e.webp" alt="Project dashboard pae showing list of Epics, Stories an Tasks related to the Project. Tasks are show in the Kanban board style." />
  </picture>
</a>

  
  <figcaption>Project dashboard pae showing list of Epics, Stories an Tasks related to the Project. Tasks are show in the Kanban board style.</figcaption>
</figure>

<p>Tasks in the Project dashboard are displayed in two different views: Kanban style, and as a list of Project related
tasks currently in the backlog.</p>

<figure class="post-figure">
  
    <a class="glightbox" href="/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_2.webp">
  <picture>
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_2-600-b090b071e.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_2-800-b090b071e.webp 800w" type="image/webp" />
    <source sizes="(max-width: 600px) 100vw, 800px" srcset="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_2-600-b090b071e.webp 600w, /generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_2-800-b090b071e.webp 800w" type="image/webp" />
    <img loading="lazy" src="/generated/assets/images/2025-12-06-using-notion-to-set-things-in-motion/project_dashboard_2-800-b090b071e.webp" alt="List of tasks in the backlog for the selected Project." />
  </picture>
</a>

  
  <figcaption>List of tasks in the backlog for the selected Project.</figcaption>
</figure>

<h2 id="steps-to-set-up-a-scrum-based-project-management-system-in-notion">Steps to set up a Scrum-based project management system in Notion</h2>

<p>I’ve split the setup into the following steps:</p>
<ol>
  <li>Core database setup,</li>
  <li>Create essential views,</li>
  <li>Create project dashboard template,</li>
  <li>Creating a project,</li>
  <li>Sprint (month) planning and execution</li>
</ol>

<p>After you create a Notion account, you’ll be met with a default workspace. My suggestion is to
remove the ‘New page’, ‘Welcome to Notion!’ and ‘To Do List’. Add everything under the ‘Private’
section.</p>

<h3 id="part-1-core-database-setup">Part 1: Core Database Setup</h3>

<h4 id="step-1-create-projects-registry">Step 1: Create Projects Registry</h4>

<ol>
  <li>Create a new page in Notion called “<strong>Project Management Hub</strong>”</li>
  <li>Type <code class="language-plaintext highlighter-rouge">/database</code> and select “Database - Full page”</li>
  <li>Name it “<strong>Projects</strong>”</li>
  <li>Add properties:
    <ul>
      <li><strong>Name</strong> (Title) - Project name</li>
      <li><strong>Status</strong> (Select) - Options: Planning, Active, On Hold, Completed</li>
      <li><strong>Description</strong> (Text) - Project description</li>
      <li><strong>Start Date</strong> (Date)</li>
      <li><strong>Target End Date</strong> (Date)</li>
    </ul>
  </li>
</ol>

<h4 id="step-2-create-epics-database">Step 2: Create Epics Database</h4>

<ol>
  <li>On the Project Management Hub page, create another database</li>
  <li>Type <code class="language-plaintext highlighter-rouge">/database</code> and select “Database - Full page”</li>
  <li>Name it “<strong>Epics</strong>”</li>
  <li>Add properties:
    <ul>
      <li><strong>Name</strong> (Title) - Epic name</li>
      <li><strong>Projects</strong> (Relation) - Link to Projects Registry - Enable Two-way relation (Epics will appear in Projects database,
and we’ll be able to use properties from the Epics database in Projects database)</li>
      <li><strong>Description</strong> (Text) - Epic description</li>
      <li><strong>Status</strong> (Formula) - From Stories (configure after Stories created)</li>
      <li><strong>Estimated Hours</strong> (Formula) - From Stories (configure after Stories database is created)</li>
      <li><strong>Actual Hours</strong> (Formula) - From Stories (configure after Stories created)</li>
    </ul>
  </li>
</ol>

<div class="premonition info">
  <i class="premonition pn-info"></i>
  <div class="content">
    <p class="header">Notion: Rollup of rollups</p><p>The Estimated Hours and Actual Hours should (in my opinion) be automatically calculated by
summing up values of same-named properties from all the Stories associated with a particular Epic. Unfortunately,
Notion doesn’t support Rollups of Rollups, but fortunately there is a workaround for this. We
can use formulas to calculate Estimated Hours and Actual Hours. I got this solution from the
following YouTube video: <a href="https://www.youtube.com/watch?v=rGOsRNnh6fg">How to Create a Nested Rollup in Notion (rollup of a rollup) 2024 Tutorial with free template</a></p>




  </div>
</div>

<h4 id="step-3-create-stories-database">Step 3: Create Stories Database</h4>

<ol>
  <li>Create another database on the Project Management Hub page</li>
  <li>Type <code class="language-plaintext highlighter-rouge">/database</code> and select “Database - Full page”</li>
  <li>Name it “<strong>Stories</strong>”</li>
  <li>Add properties:
    <ul>
      <li><strong>Name</strong> (Title) - Story name</li>
      <li><strong>Projects</strong> (Relation) - Link to Projects database - Enable Two-way relation</li>
      <li><strong>Epic</strong> (Relation) - Link to Epics database - Enable Two-way relation</li>
      <li><strong>Description</strong> (Text) - Story description</li>
      <li><strong>Status</strong> (Formula) - From Tasks (configure after Tasks database is created)</li>
      <li><strong>Estimated Hours</strong> (Rollup) - Story time estimate (configure after Tasks created)</li>
      <li><strong>Actual Hours</strong> (Rollup) - From Tasks (configure after Tasks created)</li>
    </ul>
  </li>
</ol>

<h4 id="step-4-create-tasks-database">Step 4: Create Tasks Database</h4>

<ol>
  <li>Create another database on the Project Management Hub page</li>
  <li>Type <code class="language-plaintext highlighter-rouge">/database</code> and select “Database - Full page”</li>
  <li>Name it “<strong>Tasks</strong>”</li>
  <li>Add properties:
    <ul>
      <li><strong>Name</strong> (Title) - Task name</li>
      <li><strong>Project</strong> (Relation) - Link to Projects database - Enable Two-way relation</li>
      <li><strong>Story</strong> (Relation) - Link to Stories database - Enable Two-way relation</li>
      <li><strong>Epic</strong> (Rollup) - From Story -&gt; Epic. Configure: Relation: Story, Property: Epic, Show original</li>
      <li><strong>Description</strong> (Text) - Task description</li>
      <li><strong>Status</strong> (Status) - Options: Not started, In progress, Done</li>
      <li><strong>Month</strong> (Select) - Options: Backlog, January 2026, February 2026, March 2026, etc. Add your
own relevant months.</li>
      <li><strong>Estimated Hours</strong> (Number) - Time estimate</li>
      <li><strong>Actual Hours</strong> (Number) - Time logged</li>
    </ul>
  </li>
</ol>

<h4 id="step-5-configure-rollup-properties">Step 5: Configure Rollup Properties</h4>

<p><strong>In Stories:</strong></p>
<ul>
  <li>Click <strong>Actual Hours</strong> -&gt; Configure rollup</li>
  <li>Relation: Tasks, Property: Actual Hours, Calculate: Sum</li>
  <li>Click <strong>Estimated Hours</strong> -&gt; Configure rollup</li>
  <li>Relation: Tasks, Property: Estimated Hours, Calculate: Sum</li>
  <li>Click <strong>Status</strong> -&gt; Edit Property -&gt; Edit Formula. Formula:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Tasks</span><span class="dl">"</span><span class="p">).</span><span class="nf">filter</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Month</span><span class="dl">"</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">backlog</span><span class="dl">"</span><span class="p">))</span> <span class="o">==</span> <span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Tasks</span><span class="dl">"</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Month</span><span class="dl">"</span><span class="p">)))</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Backlog</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">red</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">red_background</span><span class="dl">"</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Tasks</span><span class="dl">"</span><span class="p">).</span><span class="nf">filter</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Status</span><span class="dl">"</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">done</span><span class="dl">"</span><span class="p">))</span> <span class="o">==</span> <span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Tasks</span><span class="dl">"</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Status</span><span class="dl">"</span><span class="p">)))</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Completed</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">green</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">green_background</span><span class="dl">"</span><span class="p">)</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">In progress</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">blue</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">blue_background</span><span class="dl">"</span><span class="p">))</span>
</code></pre></div>    </div>
    <p>This will set the property automatically:</p>
    <ul>
      <li>If all Tasks for the selected Story are in Backlog -&gt; Status = Backlog</li>
      <li>If all Tasks for the selected property are Done -&gt; Status = Done</li>
      <li>Otherwise -&gt; Status = In progress</li>
    </ul>
  </li>
</ul>

<p><strong>In Epics:</strong></p>
<ul>
  <li>Click <strong>Estimated Hours</strong> -&gt; Edit Property -&gt; Edit Formula</li>
  <li>Formula:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">sum</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Stories</span><span class="dl">"</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">)))</span>
</code></pre></div>    </div>
  </li>
  <li>Click <strong>Actual Hours</strong> -&gt; Edit Property -&gt; Edit Formula
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">sum</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Stories</span><span class="dl">"</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)))</span>
</code></pre></div>    </div>
  </li>
  <li>Click <strong>Status</strong> -&gt; Edit Property -&gt; Edit Formula. Formula:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Stories</span><span class="dl">"</span><span class="p">).</span><span class="nf">filter</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Status</span><span class="dl">"</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">backlog</span><span class="dl">"</span><span class="p">))</span> <span class="o">==</span> <span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Stories</span><span class="dl">"</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Status</span><span class="dl">"</span><span class="p">)))</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Backlog</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">red</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">red_background</span><span class="dl">"</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Stories</span><span class="dl">"</span><span class="p">).</span><span class="nf">filter</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Status</span><span class="dl">"</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">completed</span><span class="dl">"</span><span class="p">))</span> <span class="o">==</span> <span class="nf">length</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Stories</span><span class="dl">"</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Status</span><span class="dl">"</span><span class="p">)))</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Completed</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">green</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">green_background</span><span class="dl">"</span><span class="p">)</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">In progress</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">blue</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">blue_background</span><span class="dl">"</span><span class="p">))</span>
</code></pre></div>    </div>
    <p>This will set the property automatically:</p>
    <ul>
      <li>If all Stories for the selected Epic are in Backlog -&gt; Status = Backlog</li>
      <li>If all Stories for the selected property are Completed -&gt; Status = Completed</li>
      <li>Otherwise -&gt; Status = In progress</li>
    </ul>
  </li>
</ul>

<h4 id="step-6-add-calculated-properties">Step 6: Add Calculated Properties</h4>

<p><strong>In Epics, add:</strong></p>
<ul>
  <li><strong>Remaining Hours</strong> (Formula):
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">-</span> <span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Progress %</strong> (Formula):
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">round</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">/</span> <span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>Click <strong>Progress %</strong> -&gt; Edit property -&gt; Show as: Bar</li>
</ul>

<p><strong>In Stories, add:</strong></p>
<ul>
  <li><strong>Remaining Hours</strong> (Formula):
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">-</span> <span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Progress %</strong> (Formula):
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">round</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">/</span> <span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>Click <strong>Progress %</strong> -&gt; Edit property -&gt; Show as: Bar</li>
</ul>

<p><strong>In Tasks, add:</strong></p>
<ul>
  <li><strong>Variance</strong> (Formula):
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">-</span> <span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Over/Under</strong> (Formula):
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Estimated Hours</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">Over</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">red</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">background_red</span><span class="dl">"</span><span class="p">),</span> <span class="k">if</span><span class="p">(</span><span class="nf">prop</span><span class="p">(</span><span class="dl">"</span><span class="s2">Actual Hours</span><span class="dl">"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">✓ Under</span><span class="dl">"</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="dl">"</span><span class="s2">green</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">background_green</span><span class="dl">"</span><span class="p">)))</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="part-2-create-essential-views">Part 2: Create Essential Views</h3>

<h4 id="views-for-epics">Views for Epics</h4>

<ol>
  <li><strong>Full view</strong> (Table)
    <ul>
      <li>Rename view to: Full view</li>
      <li>Group by: Projects</li>
    </ul>
  </li>
  <li><strong>Default view</strong> (Table)
    <ul>
      <li>Show: Name, Projects, Status, Estimated Hours, Actual Hours, Progress %</li>
      <li>Group by: Project</li>
    </ul>
  </li>
  <li><strong>By Status</strong> (Board)
    <ul>
      <li>Group by: Status</li>
      <li>Filter by Project as needed</li>
    </ul>
  </li>
</ol>

<h4 id="views-for-stories">Views for Stories</h4>

<ol>
  <li><strong>Full view</strong> (Table)
    <ul>
      <li>Rename view to: Full view</li>
      <li>Group by Project</li>
      <li>Sort by: Epic</li>
    </ul>
  </li>
  <li><strong>Default view</strong> (Table)
    <ul>
      <li>Show: Name, Project, Epic, Status, Estimated Hours, Actual Hours, Progress %</li>
      <li>Group by: Project</li>
      <li>Sort by: Epic</li>
    </ul>
  </li>
  <li><strong>By Epic</strong> (Table)
    <ul>
      <li>Group by: Epic</li>
      <li>Show time tracking columns</li>
    </ul>
  </li>
</ol>

<h4 id="views-for-tasks">Views for Tasks</h4>

<ol>
  <li><strong>Current Month</strong> (Board) - PRIMARY VIEW
    <ul>
      <li>Group by: Status</li>
      <li>Filter: Month -&gt; Is -&gt; January 2026</li>
      <li>Filter: Status -&gt; Is not -&gt; Backlog</li>
      <li>Properties: Name, Project, Epic, Estimated Hours, Actual Hours</li>
      <li>Sort: Project</li>
      <li>This shows ALL current work across ALL projects!</li>
    </ul>
  </li>
  <li><strong>All Backlogs</strong> (Table)
    <ul>
      <li>Filter: Month -&gt; Is -&gt; Backlog</li>
      <li>Group by: Projects</li>
      <li>Sort by: Projects, Story</li>
    </ul>
  </li>
  <li><strong>By Project</strong> (Table)
    <ul>
      <li>Group by: Projects</li>
      <li>Sort by: Status, Projects</li>
    </ul>
  </li>
  <li><strong>Time Tracking</strong> (Table)
    <ul>
      <li>Show: Name, Projects, Epic, Story, Estimated Hours, Actual Hours, Variance, Over/Under</li>
      <li>Group by: Projects</li>
    </ul>
  </li>
</ol>

<h3 id="part-3-create-project-dashboard-template">Part 3: Create Project Dashboard Template</h3>

<h4 id="step-1-create-template-page">Step 1: Create Template Page</h4>

<ol>
  <li>In Project Management Hub, create a new page: “<strong>PROJECT DASHBOARD TEMPLATE</strong>”</li>
  <li>Add header:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># [Project Name]

⚠️ TEMPLATE - Duplicate for each new project

**Summary**: [Project summary]
</code></pre></div></div>

<h3 id="set-2-add-linked-database---projects">Set 2: Add Linked Database - Projects</h3>
<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">/linked database</code></li>
  <li>Select “Projects”</li>
  <li>Create new view: Project Name</li>
  <li>Filter: Project -&gt; Name -&gt; [leave empty - will set per project]</li>
</ol>

<h3 id="step-3-add-linked-database---epics">Step 3: Add Linked Database - Epics</h3>

<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">/linked database</code></li>
  <li>Select “Epics”</li>
  <li>Create new view: “Project Epics”</li>
  <li>Filter: Project -&gt; [leave empty - will set per project]</li>
  <li>Show: Name, Status, Estimated Hours, Actual Hours, Remaining Hours, Progress %</li>
  <li>Group by: Status</li>
</ol>

<h3 id="step-4-add-linked-database---stories">Step 4: Add Linked Database - Stories</h3>

<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">/linked database</code></li>
  <li>Select “Stories”</li>
  <li>Create new view: “Project Stories”</li>
  <li>Filter: Project -&gt; [leave empty]</li>
  <li>Show: Name, Epic, Status, Estimated Hours, Actual Hours, Remaining Hours, Progress %</li>
  <li>Group by: Epic</li>
</ol>

<h3 id="step-5-add-linked-database---current-sprint-tasks">Step 5: Add Linked Database - Current Sprint Tasks</h3>

<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">/linked database</code></li>
  <li>Select “Tasks”</li>
  <li>Create new view: “Project Current Month”</li>
  <li>View type: Board</li>
  <li>Filters:
    <ul>
      <li>Project -&gt; [leave empty]</li>
      <li>Month -&gt; Is -&gt; January 2026</li>
    </ul>
  </li>
  <li>Group by: Status</li>
  <li>Show: Name, Epic, Estimated Hours, Actual Hours</li>
</ol>

<h3 id="step-6-add-linked-database---backlog">Step 6: Add Linked Database - Backlog</h3>

<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">/linked database</code></li>
  <li>Select “Tasks”</li>
  <li>Create new view: “Project Backlog”</li>
  <li>View type: Table</li>
  <li>Filters:
    <ul>
      <li>Project -&gt; [leave empty]</li>
      <li>Month -&gt; Is -&gt; Backlog</li>
    </ul>
  </li>
  <li>Sort by: Story</li>
  <li>Group by: Story</li>
</ol>

<p>Template is complete!</p>

<h2 id="part-4-create-your-first-project">Part 4: Create Your First Project</h2>

<p>Let’s create first project to demo the template.</p>

<h3 id="step-1-register-the-project">Step 1: Register the Project</h3>

<ol>
  <li>Go to <strong>Projects Registry</strong> database</li>
  <li>Click “New”</li>
  <li>Fill in:
    <ul>
      <li><strong>Name</strong>: RISC-V SoC</li>
      <li><strong>Status</strong>: Active</li>
      <li><strong>Description</strong>: Complete RISC-V System-on-Chip implementation</li>
      <li><strong>Start Date</strong>: [Your date]</li>
      <li><strong>Target End Date</strong>: [Your target date]</li>
    </ul>
  </li>
</ol>

<h3 id="step-2-create-project-dashboard">Step 2: Create Project Dashboard</h3>

<ol>
  <li>Go to <strong>PROJECT DASHBOARD TEMPLATE</strong></li>
  <li>Click “…” menu → Duplicate</li>
  <li>Rename to “<strong>RISC-V SoC Dashboard</strong>”</li>
  <li>Update summary</li>
  <li>Update all linked database filters:
    <ul>
      <li>In each view, edit filter: Project -&gt; Is -&gt; RISC-V SoC</li>
    </ul>
  </li>
</ol>

<h3 id="step-3-create-epics">Step 3: Create Epics</h3>

<ol>
  <li>Go to <strong>Epics</strong> database</li>
  <li>Create three entries:</li>
</ol>

<p><strong>Epic 1:</strong></p>
<ul>
  <li><strong>Name</strong>: RISC-V Core</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Description</strong>: Design and implementation of the RISC-V processor core</li>
</ul>

<p><strong>Epic 2:</strong></p>
<ul>
  <li><strong>Name</strong>: AXI Interconnect</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Description</strong>: Implementation of AXI bus interconnect for system communication</li>
</ul>

<p><strong>Epic 3:</strong></p>
<ul>
  <li><strong>Name</strong>: AXI Slave Generator</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Description</strong>: Tool for generating AXI slave peripherals</li>
</ul>

<h3 id="step-4-create-stories">Step 4: Create Stories</h3>

<ol>
  <li>Go to <strong>Stories</strong> database</li>
  <li>Create two entries:</li>
</ol>

<p><strong>Story 1:</strong></p>
<ul>
  <li><strong>Name</strong>: Watch Onur Mutlu’s Lectures on Digital Design and Computer Architecture</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Epic</strong>: RISC-V Core</li>
  <li><strong>Description</strong>: Complete lecture series to understand fundamentals</li>
</ul>

<p><strong>Story 2:</strong></p>
<ul>
  <li><strong>Name</strong>: Read Harris &amp; Harris: Digital Design &amp; Computer Architecture RISC-V Edition</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Epic</strong>: RISC-V Core</li>
  <li><strong>Description</strong>: Study the textbook chapters on RISC-V architecture</li>
</ul>

<h3 id="step-5-create-tasks">Step 5: Create Tasks</h3>

<ol>
  <li>Go to <strong>Tasks</strong> database</li>
  <li>Create tasks for the Harris &amp; Harris story:</li>
</ol>

<p><strong>Task 1:</strong></p>
<ul>
  <li><strong>Name</strong>: Chapter 1 - From Zero to One</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Story</strong>: Read Harris &amp; Harris: Digital Design &amp; Computer Architecture RISC-V Edition</li>
  <li><strong>Description</strong>: Introduction to digital systems</li>
  <li><strong>Status</strong>: Not started</li>
  <li><strong>Month</strong>: Backlog</li>
  <li><strong>Estimated Hours</strong>: 3</li>
</ul>

<p><strong>Task 2:</strong></p>
<ul>
  <li><strong>Name</strong>: Chapter 2 - Combinational Logic Design</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Story</strong>: Read Harris &amp; Harris: Digital Design &amp; Computer Architecture RISC-V Edition</li>
  <li><strong>Status</strong>: Not started</li>
  <li><strong>Month</strong>: Backlog</li>
  <li><strong>Estimated Hours</strong>: 4</li>
</ul>

<p><strong>Task 3:</strong></p>
<ul>
  <li><strong>Name</strong>: Chapter 3 - Sequential Logic Design</li>
  <li><strong>Project</strong>: RISC-V SoC</li>
  <li><strong>Story</strong>: Read Harris &amp; Harris: Digital Design &amp; Computer Architecture RISC-V Edition</li>
  <li><strong>Status</strong>: Not started</li>
  <li><strong>Month</strong>: Backlog</li>
  <li><strong>Estimated Hours</strong>: 4</li>
</ul>

<p>Continue creating tasks for remaining chapters…</p>

<p><strong>Note</strong>: The Epic column auto-populates via rollup from Story → Epic.</p>

<h2 id="part-5-sprint-planning-and-execution">Part 5: Sprint Planning and Execution</h2>

<h3 id="planning-your-first-sprint">Planning Your First Sprint</h3>

<ol>
  <li>Go to <strong>Tasks</strong> database</li>
  <li>View “All Backlogs”</li>
  <li>Filter or sort by Project: RISC-V SoC</li>
  <li>Select tasks for January 2026 (aim for monthly capacity)</li>
  <li>For each selected task:
    <ul>
      <li>Change <strong>Month</strong>: Backlog-&gt; January 2026</li>
      <li>Change <strong>Status</strong>: Backlog -&gt; To Do</li>
    </ul>
  </li>
</ol>

<h3 id="using-the-unified-kanban">Using the Unified Kanban</h3>

<ol>
  <li>Go to <strong>Tasks</strong> database</li>
  <li>View “Current Month”</li>
  <li>See all January 2026 tasks from all projects</li>
  <li>Drag tasks between columns:
    <ul>
      <li><strong>Not started</strong> → <strong>In progress</strong> (when starting)</li>
      <li><strong>In progress</strong> → <strong>Done</strong> (when complete)</li>
    </ul>
  </li>
  <li>Tasks are grouped by Status, sorted by Project</li>
</ol>

<h3 id="daily-workflow">Daily Workflow</h3>

<p><strong>Morning:</strong></p>
<ol>
  <li>Open “Current Month” Kanban</li>
  <li>Review all active tasks across projects</li>
  <li>Move 1-3 tasks to “In progress”</li>
</ol>

<p><strong>During work:</strong></p>
<ol>
  <li>Focus on ongoing tasks</li>
  <li>Track time manually or with timer</li>
</ol>

<p><strong>End of day:</strong></p>
<ol>
  <li>Update <strong>Actual Hours</strong> on tasks worked</li>
  <li>Move completed tasks to “Done”</li>
  <li>Move unstarted tasks back to “Not started” if needed</li>
</ol>

<h3 id="ending-a-month-sprint">Ending a Month (Sprint)</h3>

<ol>
  <li>Go to “Current Month”</li>
  <li>Select all tasks in “Not started” and “In progress”</li>
  <li>Bulk edit: Month -&gt; February 2026</li>
  <li>Update Kanban filter: Month -&gt; Is -&gt; February 2026</li>
</ol>]]></content><author><name></name></author><category term="Productivity" /><category term="notion" /><category term="goals" /><category term="productivity" /><summary type="html"><![CDATA[In this post I describe how I manage my projects - both hobby and commercial and the motivation behind it. I give a quick tour of my Scrum-like project management setup in a tool called [Notion](https://www.notion.so), and I also give step-by-step instructions on how to create a similar Notion layout.]]></summary></entry></feed>