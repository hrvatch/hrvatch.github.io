<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Weather and air quality station: Part 1 | Critical Path</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Weather and air quality station: Part 1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Battery-Powered Weather &amp; Air Quality Station Raspberry Pi Pico 2 W + Inky Impression 7.3” + Bosch BME690 + Bosch BMV080 + Meteoblue API Firmware written in C for the Pico’s RISC-V core" />
<meta property="og:description" content="Battery-Powered Weather &amp; Air Quality Station Raspberry Pi Pico 2 W + Inky Impression 7.3” + Bosch BME690 + Bosch BMV080 + Meteoblue API Firmware written in C for the Pico’s RISC-V core" />
<link rel="canonical" href="https://criticalpath.dev/weather_station/weather_station_part1/" />
<meta property="og:url" content="https://criticalpath.dev/weather_station/weather_station_part1/" />
<meta property="og:site_name" content="Critical Path" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-01T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Weather and air quality station: Part 1" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-01T00:00:00+01:00","datePublished":"2025-11-01T00:00:00+01:00","description":"Battery-Powered Weather &amp; Air Quality Station Raspberry Pi Pico 2 W + Inky Impression 7.3” + Bosch BME690 + Bosch BMV080 + Meteoblue API Firmware written in C for the Pico’s RISC-V core","headline":"Weather and air quality station: Part 1","mainEntityOfPage":{"@type":"WebPage","@id":"https://criticalpath.dev/weather_station/weather_station_part1/"},"url":"https://criticalpath.dev/weather_station/weather_station_part1/"}</script>
<!-- End Jekyll SEO tag -->
<link id="main-stylesheet" rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://criticalpath.dev/feed.xml" title="Critical Path" />
</head>
<body><header class="site-header">

  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Critical Path</a>
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon"></span>
        </label>

        <div class="nav-items">
  <a class="nav-item" href="/projects/">Projects</a>
  <a class="nav-item" href="/posts/">Posts</a>
  <a class="nav-item" href="/tags/">Tags</a>
  <a class="nav-item" href="/about/">About</a>
</div>

      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Weather and air quality station: Part 1</h1>
    <div class="post-meta">
      <time class="dt-published" datetime="2025-11-01T00:00:00+01:00" itemprop="datePublished">
        Nov 1, 2025
      </time>
    </div>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="battery-powered-weather--air-quality-station">Battery-Powered Weather &amp; Air Quality Station</h1>
<p>Raspberry Pi Pico 2 W + Inky Impression 7.3” + Bosch BME690 + Bosch BMV080 + Meteoblue API<br />
Firmware written in C for the Pico’s RISC-V core</p>

<h2 id="project-overview">Project Overview</h2>
<p>This project builds a standalone weather and air quality monitoring station. The Raspberry Pi Pico 2 W collects measurements from two Bosch sensors (BME690 and BMV080), pulls forecast data from the Meteoblue API over Wi-Fi, and displays results on a 7.3” e-paper display (Inky Impression). The device will be battery powered and enclosed in a plexiglass case to protect components while ensuring airflow.</p>

<h2 id="system-architecture">System Architecture</h2>

<p>Data flow:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sensors (BME690 + BMV080)
  -&gt; Data Processing + Rolling Averages
    -&gt; Wi-Fi Forecast Fetch (Meteoblue JSON)
      -&gt; UI Construction (framebuffer)
        -&gt; E-Paper Display Refresh
</code></pre></div></div>

<p>Components:</p>
<ul>
  <li>Raspberry Pi Pico 2 W (RISC-V)</li>
  <li>BME690: temperature, humidity, pressure, gas (IAQ)</li>
  <li>BMV080: particulate matter (PM1, PM2.5, PM10)</li>
  <li>Inky Impression 7.3” e-paper over SPI</li>
  <li>HTTPS networking using lwIP + mbedTLS</li>
  <li>Lightweight JSON parsing in C (ex: jsmn)</li>
</ul>

<p>Design:</p>
<ul>
  <li>Event-driven firmware with deep sleep between tasks</li>
  <li>Forecast caching for offline operation</li>
  <li>Minimal UI optimized for e-paper refresh constraints</li>
  <li>All core firmware written in C</li>
</ul>

<h2 id="display-and-ui-strategy">Display and UI Strategy</h2>
<ul>
  <li>Refresh e-paper only on a schedule or when values change</li>
  <li>Off-screen framebuffer rendering</li>
  <li>UI features:
    <ul>
      <li>Temperature and humidity</li>
      <li>PM2.5 concentration</li>
      <li>Short forecast summary</li>
      <li>Battery voltage</li>
      <li>Timestamp for last update</li>
    </ul>
  </li>
</ul>

<p>Suggested refresh interval: 20 to 60 minutes</p>

<h2 id="power-system">Power System</h2>

<p>Battery: 3 AA cells in series</p>

<p>Electrical notes:</p>
<ul>
  <li>NiMH: approx. 3.6 V nominal, 4.2 V fresh</li>
  <li>Safe to connect directly to Pico VSYS input (1.8 to 5.5 V range)</li>
</ul>

<p>Series rules:</p>
<ul>
  <li>Voltage increases (3x)</li>
  <li>Capacity stays 2000 mAh</li>
  <li>Energy increases to approx. 7.2 Wh</li>
</ul>

<p>Wiring:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3xAA holder (+) -&gt; switch -&gt; optional protection -&gt; VSYS (Pico)
3xAA holder (-) -------------------------------&gt; GND (Pico)
</code></pre></div></div>

<p>Battery level can be read via VSYS/3 ADC pin.</p>

<h2 id="recommended-duty-cycles">Recommended Duty Cycles</h2>
<ul>
  <li>BME690: 2–5 min interval</li>
  <li>BMV080: 10–60 min interval</li>
  <li>Wi-Fi forecast: 30–60 min interval</li>
  <li>E-paper refresh: 20–60 min interval</li>
</ul>

<h2 id="estimated-runtime">Estimated Runtime</h2>

<p>Assumptions:</p>
<ul>
  <li>7.2 Wh battery energy</li>
  <li>85% regulator efficiency</li>
  <li>Approx. 6.12 Wh usable at 3.3 V</li>
  <li>Average 3.3 V load depending on duty cycle</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Mode</th>
      <th style="text-align: right">Avg Current</th>
      <th style="text-align: right">Runtime Hours</th>
      <th style="text-align: right">Runtime Days</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Air Quality Focused (BMV080: 5 min)</td>
      <td style="text-align: right">2.50 mA</td>
      <td style="text-align: right">~742</td>
      <td style="text-align: right">~30.9</td>
    </tr>
    <tr>
      <td>Balanced (BMV080: 10 min)</td>
      <td style="text-align: right">1.36 mA</td>
      <td style="text-align: right">~1364</td>
      <td style="text-align: right">~56.8</td>
    </tr>
    <tr>
      <td>Battery Saver (BMV080: 60 min)</td>
      <td style="text-align: right">0.38 mA</td>
      <td style="text-align: right">~4880</td>
      <td style="text-align: right">~203</td>
    </tr>
  </tbody>
</table>

<p>Major power contributors:</p>
<ul>
  <li>BMV080 sensor duty cycle</li>
  <li>Wi-Fi bursts</li>
  <li>Display refresh cycles</li>
</ul>

<h2 id="enclosure-notes">Enclosure Notes</h2>
<ul>
  <li>Plexiglass case with airflow channels for sensors</li>
  <li>Prevent heat transfer from MCU and display into sensors</li>
  <li>Secure e-paper ribbon cable</li>
  <li>Provide easy access for battery replacement</li>
</ul>

<h2 id="development-and-testing-plan">Development and Testing Plan</h2>
<ol>
  <li>Bring up sensors and verify I2C</li>
  <li>Implement sensor data processing and UI rendering</li>
  <li>Add Wi-Fi and Meteoblue JSON support</li>
  <li>Measure power usage and adjust intervals</li>
  <li>Assemble enclosure and validate environmental behavior</li>
</ol>

<p>Error messaging:</p>
<ul>
  <li>Wi-Fi unavailable (using cached forecast)</li>
  <li>Sensor communication error</li>
  <li>Low battery (auto-reduce update frequency)</li>
</ul>

<h2 id="future-work">Future Work</h2>
<ul>
  <li>Final wiring/PCB design</li>
  <li>Battery gauge improvements</li>
  <li>Optional data logging</li>
  <li>Potential partial refresh optimization</li>
</ul>


  </div>

  <a class="u-url" href="/weather_station/weather_station_part1/" hidden></a>
</article>

      </div>
    </main><link id="fa-stylesheet" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.0.0/css/all.min.css">

<footer class="site-footer h-card">
  <data class="u-url" value="/"></data>

  <div class="wrapper">
    <div class="social-links"><ul class="social-media-list"><li>
    <a rel="me" href="https://github.com/hrvatch" target="_blank" title="Hrvoje's Github">
      <span class="grey fa-brands fa-github fa-lg"></span>
    </a>
  </li><li>
    <a rel="me" href="https://www.linkedin.com/in/hrvoje-butina/" target="_blank" title="Hrvoje's Linkedin profile">
      <span class="grey fa-brands fa-linkedin fa-lg"></span>
    </a>
  </li><li>
    <a rel="me" href="mailto:criticalpathmailto.squabble546@passmail.net" target="_blank" title="Hrvoje's E-mail">
      <span class="grey fa-regular fa-envelope fa-lg"></span>
    </a>
  </li>
  <li>
    <a href="https://criticalpath.dev/feed.xml" target="_blank" title="Subscribe to syndication feed">
      <svg class="svg-icon grey" viewbox="0 0 16 16">
        <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
          11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
          13.806c0-1.21.983-2.195 2.194-2.195zM10.606
          16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
        />
      </svg>
    </a>
  </li>

</ul>
</div>

  </div>

</footer>


<script src="/assets/js/copy-code.js"></script>
<script src="/assets/js/copy-code.js"></script>
  </body>

</html>
